<!DOCTYPE html>
<html>

<head>
  <title>Elm-Vegalite Time Unit Tests</title>
  <meta charset="utf-8" />

  <!-- These scripts link to the Vega/Vega-Lite runtime -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
  <script src="js/timeTests.js"></script>

  <!-- Page formatting -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:300" rel="stylesheet" />
  <style>
    body {
      font-family: "Roboto", sans-serif;
    }

    figcaption {
      padding-top: 0.5em;
    }

    .cell {
      float: left;
      padding: 1em;
      border-radius: 1em;
      margin: 1.2em;
      background-color: rgb(251, 247, 238);
    }
  </style>
</head>

<body>
  <h1>Elm-Vega Time Unit Tests</h1>

  <h2>Aggregating by Basic Time Units</h2>

  <p>
    Simulated data hourly over three years 2010-2012. The 2011 data on average
    2 degrees higher than 2010 and in 2012, 4 degress higher.
  </p>

  <h3>Years</h3>

  <figure class="cell">
    <div id="timeYear"></div>
    <figcaption>Aggregate by year</figcaption>
  </figure>
  <figure class="cell">
    <div id="timeYearQuarter"></div>
    <figcaption>Aggregate by yearQuarter</figcaption>
  </figure>
  <figure class="cell">
    <div id="timeYearQuarterMonth"></div>
    <figcaption>Aggregate by yearQuarterMonth</figcaption>
  </figure>
  <figure class="cell">
    <div id="timeYearMonth"></div>
    <figcaption>Aggregate by yearMonth</figcaption>
  </figure>
  <figure class="cell">
    <div id="timeYearMonthDate"></div>
    <figcaption>Aggregate by yearMonthDate</figcaption>
  </figure>
  <figure class="cell">
    <div id="timeYearMonthDateHours"></div>
    <figcaption>Aggregate by yearMonthDateHours</figcaption>
  </figure>
  <figure class="cell">
    <div id="timeYearMonthDateHoursMinutes"></div>
    <figcaption>Aggregate by yearMonthDateHoursMinutes</figcaption>
  </figure>
  <figure class="cell">
    <div id="timeYearMonthDateHoursMinutesSeconds"></div>
    <figcaption>Aggregate by yearMonthDateHoursMinutesSeconds</figcaption>
  </figure>

  <div style="clear: left;"></div>

  <h3>Quarters</h3>

  <figure class="cell">
    <div id="timeQuarter"></div>
    <figcaption>Aggregate by quarter</figcaption>
  </figure>
  <figure class="cell">
    <div id="timeQuarterMonth"></div>
    <figcaption>Aggregate by quarterMonth</figcaption>
  </figure>
  <div style="clear: left;"></div>

  <h3>Months</h3>

  <figure class="cell">
    <div id="timeMonth"></div>
    <figcaption>Aggregate by month</figcaption>
  </figure>
  <figure class="cell">
    <div id="timeMonthDate"></div>
    <figcaption>Aggregate by monthDate</figcaption>
  </figure>
  <figure class="cell">
    <div id="timeMonthDateHours"></div>
    <figcaption>Aggregate by monthDateHours</figcaption>
  </figure>
  <figure class="cell">
    <div id="timeMonthDateHoursMinutes"></div>
    <figcaption>Aggregate by monthDateHoursMinutes</figcaption>
  </figure>
  <figure class="cell">
    <div id="timeMonthDateHoursMinutesSeconds"></div>
    <figcaption>Aggregate by monthDateHoursMinutesSeconds</figcaption>
  </figure>

  <div style="clear: left;"></div>

  <h3>Days</h3>

  <figure class="cell">
    <div id="timeDay"></div>
    <figcaption>Aggregate by day</figcaption>
  </figure>
  <figure class="cell">
    <div id="timeDayHours"></div>
    <figcaption>Aggregate by dayHours</figcaption>
  </figure>
  <figure class="cell">
    <div id="timeDayHoursMinutes"></div>
    <figcaption>Aggregate by dayHoursMinutes</figcaption>
  </figure>
  <figure class="cell">
    <div id="timeDayHoursMinutesSeconds"></div>
    <figcaption>Aggregate by dayHoursMinutesSeconds</figcaption>
  </figure>

  <div style="clear: left;"></div>

  <h3>Date</h3>

  <figure class="cell">
    <div id="timeDate"></div>
    <figcaption>Aggregate by date (day of month 1-31)</figcaption>
  </figure>

  <div style="clear: left;"></div>

  <h3>Hours</h3>

  <figure class="cell">
    <div id="timeHours"></div>
    <figcaption>Aggregate by hours</figcaption>
  </figure>
  <figure class="cell">
    <div id="timeHoursMinutes"></div>
    <figcaption>Aggregate by hoursMinutes</figcaption>
  </figure>
  <figure class="cell">
    <div id="timeHoursMinutesSeconds"></div>
    <figcaption>Aggregate by hoursMinutesSeconds</figcaption>
  </figure>

  <div style="clear: left;"></div>

  <h3>Minutes</h3>

  <figure class="cell">
    <div id="timeMinutes"></div>
    <figcaption>Aggregate by minutes</figcaption>
  </figure>
  <figure class="cell">
    <div id="timeMinutesSeconds"></div>
    <figcaption>Aggregate by minutesSeconds</figcaption>
  </figure>

  <div style="clear: left;"></div>

  <h3>Seconds</h3>

  <figure class="cell">
    <div id="timeSeconds"></div>
    <figcaption>Aggregate by seconds</figcaption>
  </figure>
  <figure class="cell">
    <div id="timeSecondsMilliseconds"></div>
    <figcaption>Aggregate by secondsMilliseconds</figcaption>
  </figure>
  <div style="clear: left;"></div>

  <h3>Milliseconds</h3>

  <figure class="cell">
    <div id="timeMilliseconds"></div>
    <figcaption>Aggregate by milliseconds</figcaption>
  </figure>

  <div style="clear: left;"></div>

  <h2>Local and UTC Times</h2>

  <figure class="cell">
    <div id="localTime"></div>
    <figcaption>Local time crossing daylight saving</figcaption>
  </figure>
  <figure class="cell">
    <div id="utcTime"></div>
    <figcaption>UTC time crossing daylight saving</figcaption>
  </figure>

  <div style="clear: left;"></div>

  <h2>Positioning By Time Band</h2>

  <figure class="cell">
    <div id="timeBand"></div>
    <figcaption>
      Each data point placed in middle (rather than default start) of each
      time band.
    </figcaption>
  </figure>

  <div style="clear: left;"></div>

  <h2>Limiting date domain with Time.Posix date</h2>

  <figure class="cell">
    <div id="timePosix"></div>
    <figcaption>
      Should start in July 2013.
    </figcaption>
  </figure>

  <div style="clear: left;"></div>

  <h2>Using pre-binned time units</h2>

  <figure class="cell">
    <div id="preBinned"></div>
    <figcaption>
      Data are already binned so axis title shouldn't reference binning.
    </figcaption>
  </figure>

  <div style="clear: left;"></div>

  <h2>Source</h2>
  <div id="elmContainer"></div>

  <script>
    Elm.TimeTests.init({
      node: document.getElementById("elmContainer"),
    }).ports.elmToJS.subscribe(function (namedSpecs) {
      for (let name of Object.keys(namedSpecs)) {
        vegaEmbed(`#${name}`, namedSpecs[name], {
          actions: true,
          logLevel: vega.Warn,
        }).catch(console.warn);
      }
    });
  </script>
</body>

</html>